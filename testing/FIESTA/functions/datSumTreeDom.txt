## datSumTreeDom
gui=FALSE
#tree=NULL
plt=NULL
#cond=NULL
ACI=FALSE
tuniqueid="PLT_CN"
puniqueid="CN"
cuniqueid="PLT_CN"
bycond=FALSE
presence=FALSE
#tsumvar=NULL
TPA=FALSE
adjTPA=1
tfun=sum
tfilter=NULL
tdomvar="SPCD"
tdomvarlst=NULL
tdomvar2=NULL
tdomvar2lst=NULL
tdomprefix="SP"
tdombarplot=FALSE
tdomtot=FALSE
tdomtotnm=NULL
FIAname=FALSE
proportion=FALSE
lbs2tons=TRUE
adjplot="NONE"
adjstrat=FALSE
#strvar=NULL
#unitvar=NULL
savedata=FALSE
parameters=FALSE
#outfolder=NULL
outfn=NULL
relcover=FALSE
strunitvars=NULL
tround=3
 
tree=WYtree
cond=WYcond
plt=WYplt
puniqueid="CN"
bycond=FALSE
tsumvar="BA"
TPA=TRUE
tdomtotnm="BATPA_LIVE"
tfilter="STATUSCD == 1"
savedata=FALSE
proportion=TRUE
presence=TRUE
tround=2
tdomprefix="BATPA_LIVE"
tdomvarlst <- c(19, 202)
relcover=TRUE

bycond=FALSE


system.time(
tdat <- datSumTreeDom(tree=tree, plt=plt, cond=cond, ACI=ACI, tuniqueid=tuniqueid,
	puniqueid=puniqueid, cuniqueid=cuniqueid, bycond=bycond, presence=presence,
	tsumvar=tsumvar, TPA=TPA, adjTPA=adjTPA, tfun=tfun, tfilter=tfilter, 
	tdomvar=tdomvar, tdomvarlst=tdomvarlst, tdomvar2=tdomvar2, tdomvar2lst=tdomvar2lst,
	tdomprefix=NULL, tdombarplot=tdombarplot, tdomtot=tdomtot, tdomtotnm=tdomtotnm,
	FIAname=FIAname, proportion=proportion, lbs2tons=lbs2tons, adjplot=adjplot,
	adjstrat=adjstrat, strunitvars=strunitvars, savedata=savedata, 
	outfolder=outfolder, outfn=oufn, tround=tround)
)


tdomdat <- tdat$tdomdat
tdomdat.prop <- tdat$tdomdat.prop
tdomdat.pres <- tdat$tdomdat.pres
tdomvarlut <- tdat$tdomvarlut
tdomlst <- tdat$tdomlst

head(tdomdat)
head(tdomdat.prop)
head(tdomdat.pres)
tdomvarlut
tdomlst

dim(tdomdat)
 
tdomdat[tdomdat$PLT_CN == 40404821010690,]
tdomdat.prop[tdomdat.prop$PLT_CN == 40404821010690,]


tdomdat.prop[CN == 40404821010690,]


, 203)

names(tdomdata)

tree=treef
cond=condall
tuniqueid=tuniqueid
bycond=TRUE
tsumvar=estvar
TPA=estvar.TPA
tfilter="NONE"
tdomvar=tdomvar
tdomvarlst=NULL
adjstrat=TRUE
strvar=strvar
unitvar=unitvar
outfolder=outfolder


tree=treef
cond=condall
bycond=TRUE
tsumvar=estvarn
TPA=estvarn.TPA
tdomtot=TRUE
tdomtotnm=estvarn.name
tfilter=estvarn.filter
tdomvar=tdomvar
tdomvarlst=NULL
adjstrat=TRUE
savedata=FALSE
adjTPA=adjTPA


tree=uttree
plt=utplt
cond=utcond
bycond=TRUE
tfilter="STATUSCD == 1"
TPA=TRUE
tsumvar="BA"



