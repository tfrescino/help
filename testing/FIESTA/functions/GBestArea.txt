## GBestArea
#####################
gui=FALSE
#cond=NULL
#pltstrat=NULL
cuniqueid="PLT_CN"
puniqueid="CN"
tuniqueid="PLT_CN"
FIA=FALSE
cur10yrs=FALSE
ACI=FALSE
landarea="ALL"
cond.filter=NULL
nonsamp.filter=NULL
#stratalut=NULL
adjacre=FALSE
totacres=NULL
strvar="STRATA"
nonresp=FALSE
substrvar=NULL
acrevar="ACRES"
unitvar=NULL
adjstrat=TRUE
rowvar=NULL
rowvar.filter=NULL
colvar=NULL
colvar.filter=NULL
row.FIAname=FALSE
col.FIAname=FALSE
row.orderby=NULL
col.orderby=NULL
allin1=FALSE
savedata=FALSE
parameters=FALSE
outfolder="C:/_tsf/workspace/_junk"
outfn=NULL
addtitle=TRUE
title.main=NULL
title.filter=NULL
title.ref=NULL
title.rowvar=NULL
title.colvar=NULL
title.unitvar=NULL
rawdata=FALSE
estround=0
cvround=2
counts=FALSE
plt.filter=NULL
invyrs=NULL
expcond=FALSE
savetitle=TRUE
savetitle=FALSE
nullcheck=FALSE
domvarlst=NULL
domlut=NULL
add0=FALSE
estnm=NULL
cvnm=NULL

cond=WYcond
pltstrat=WYpltstrat
puniqueid="CN"
stratalut=WYstrlut
FIA=FALSE
landarea="TIMBERLAND"
rowvar="NONE"
title.ref="Wyoming, 2011-2013"
savedata=FALSE

cond=WYcond
pltstrat=WYpltstrat
puniqueid="CN"
stratalut=WYstrlut
FIA=TRUE
landarea="TIMBERLAND"
rowvar="FORTYPCD"
row.FIAname=TRUE
title.ref=title.ref
savedata=FALSE
allin1=FALSE
outfolder=outfolder
outfn="areaest1a"
cvround=3
rawdata=TRUE




FIA=FALSE
unitvar="ESTUNIT"
add0=TRUE
allin1=FALSE

cond=WYcond
pltstrat=WYpltstrat
puniqueid="CN"
stratalut=WYstrlut
FIA=TRUE
landarea="TIMBERLAND"
rowvar="FORTYPCD"
colvar="STDSZCD"
row.FIAname=TRUE
col.FIAname=TRUE
title.ref=title.ref
savedata=TRUE
rawdata=TRUE
allin1=FALSE
outfolder=outfolder
outfn="areaest1a"
cvround=3
nullcheck=FALSE
esttype="AREA"
unitvar2=NULL
savetitle=TRUE
add0=TRUE



cond=WYcond
pltstrat=WYpltstrat
puniqueid="CN"
stratalut=WYstrlut
FIA=TRUE
landarea="FOREST"
rowvar="OWNCD"
colvar="RESERVCD"
row.FIAname=TRUE
col.FIAname=TRUE
title.ref=title.ref
savedata=TRUE
allin1=TRUE
outfolder=outfolder
outfn="areaest2"


adjacre=TRUE

totacres <- aggregate(stratalut$ACRES, list(stratalut$ESTUNIT), sum)
names(totacres) <- c("ESTUNIT", "TOTACRES")
totacres$TOTACRES <- round(totacres$TOTACRES, -1)


cond=WYcond
pltstrat=WYpltstrat
puniqueid="CN"
stratalut=WYstrlut
FIA=TRUE
landarea="TIMBERLAND"
rowvar="NONE"
title.ref="Wyoming, 2011-2013"
savedata=FALSE


cond=WYcond
pltstrat=WYpltstrat
puniqueid="CN"
stratalut=WYstrlut
FIA=FALSE
landarea="TIMBERLAND"
unitvar="ESTUNIT"
rowvar="FORTYPCD"
colvar="STDSZCD"
row.FIAname=TRUE
col.FIAname=TRUE
title.ref=title.ref
savedata=TRUE
allin1=FALSE
outfolder=outfolder
outfn="areaest5a"
cvround=3




cond=WYcond
pltstrat=WYpltstrat
puniqueid="CN"
stratalut=WYstrlut
FIA=TRUE
landarea="ALL"
rowvar="ADFORCD"
colvar="COND_STATUS_CD"
row.FIAname=TRUE
col.FIAname=TRUE
title.ref=title.ref
savedata=TRUE
allin1=FALSE
outfolder=outfolder
outfn="areaest4"



plt=WYplt[WYplt$COUNTYCD == 1,]
cond = WYcond[WYcond$PLT_CN %in% plt$CN,]
stratalut=NULL
totacres=2757613
FIA=FALSE

datorig.n=condall
uniqueid=cuniqueid
domain=rowvar
group="CONDPROP_ADJ"


datorig.n <- condall[condall[,unitvar] == 1,]

datorig.n <- pltall[pltall[,unitvar] == 1,]



areaest1 <- GBestArea(cond=WYcond, pltstrat=WYpltstrat, puniqueid="CN", 
	stratalut=WYstrlut, FIA=TRUE, landarea="TIMBERLAND", title.ref=title.ref,
	savedata=FALSE, allin1=FALSE, outfolder=outfolder, outfn="areaest1a", 
	cvround=3, rawdata=TRUE)



system.time(
areaest1 <- GBestArea(cond=WYcond, pltstrat=WYpltstrat, puniqueid="CN", stratalut=WYstrlut, FIA=TRUE, landarea="TIMBERLAND", title.ref=title.ref, savedata=FALSE, allin1=FALSE, outfolder=outfolder, outfn="areaest1a", cvround=3, rawdata=TRUE)
)

system.time(
areaest1 <- GBestArea(cond=WYcond, pltstrat=WYpltstrat, puniqueid="CN", stratalut=WYstrlut, FIA=TRUE, landarea="TIMBERLAND", rowvar="FORTYPCD", row.FIAname=TRUE, title.ref=title.ref, savedata=FALSE, allin1=FALSE, outfolder=outfolder, outfn="areaest1a", cvround=3, rawdata=TRUE)
)

system.time(
areaest2 <- GBestArea(cond=WYcond, pltstrat=WYpltstrat, puniqueid="CN", stratalut=WYstrlut, FIA=TRUE, landarea="TIMBERLAND", rowvar="FORTYPCD", colvar="STDSZCD", row.FIAname=TRUE, col.FIAname=TRUE, title.ref=title.ref, savedata=FALSE, allin1=FALSE, outfolder=outfolder, outfn="areaest1a", cvround=3,
rawdata=TRUE)
)


cond=WYcond
pltstrat=WYpltstrat
puniqueid="CN"
stratalut=WYstrlut
FIA=TRUE
landarea="TIMBERLAND"
rowvar="FORTYPCD"
row.FIAname=TRUE
title.ref=title.ref
savedata=FALSE
allin1=FALSE
outfolder=outfolder
outfn="areaest1a"
cvround=3
rawdata=TRUE



cond=WYcond
pltstrat=WYpltstrat
puniqueid="CN"
stratalut=WYstrlut
FIA=TRUE
landarea="ALL"
rowvar="FORTYPCD"
colvar="STDSZCD"
row.FIAname=TRUE
col.FIAname=TRUE
title.ref=title.ref
savedata=TRUE
allin1=FALSE
outfolder=outfolder
outfn="areaest1a"
cvround=3



FIA=FALSE
unitvar = "ESTUNIT"


## GBest.group/GBest.nonratio - TOTAL
datorig <- condall[condall$ESTUNIT == 1,]
domain="TOTAL"
group="CONDPROP_ADJ"
esttype="ACRE"
uniqueid="PLT_CN"

## GBest.group/GBest.nonratio - ROWVAR
datorig <- condall[condall[,unitvar] == 1,]
domain=rowvar
group="CONDPROP_ADJ"
esttype="ACRE"
uniqueid="PLT_CN"

## GBest.pbarfun
x.n=datorig
group.n=group


cond=datstrat
pltstrat=NULL
cuniqueid="CN"
stratalut=strata_lut
strvar="STRATA_MAP"
rowvar="fia_map_group"
totacres <- 316871
savedata=TRUE
addtitle=TRUE
outfolder="outfolder"
title.ref="SMNRA2004-2012 - STRATA2"
title.filter=NULL
ACI=TRUE
rawtable=TRUE





cond=dat
cuniqueid="CN"
stratalut=strlut1
strvar="STRATA1"
rowvar="Map_Group"



pltstrat=datstrat
puniqueid="CN"
stratalut=strlut
FIA=TRUE
landarea="TIMBERLAND"
rowvar="ADFORCD"
colvar="RESERVCD"
row.FIAname=TRUE
col.FIAname=TRUE
title.ref="Wyoming, 2011-2012"
title.rowvar="Owner" 
title.colvar="Reserved Status"
savedata=TRUE
allin1=FALSE



cond=cocond
pltstrat=pltstrat
puniqueid="PLT_CN"
stratalut=stratalut
FIA=TRUE
landarea="FOREST"
rowvar="FORTYPCD"
#colvar="STDSZCD"
colvar=NULL
row.FIAname=TRUE
#col.FIAname=TRUE
title.ref=title.ref
title.rowvar="Forest Type"
#title.colvar="Stand-size class"
savedata=TRUE
allin1=FALSE
outfolder=outfolder
rawtable=TRUE
counts=TRUE




dat=condall
unit.totacres=unit.totacres
acrevar=acrevar
unitvar=unitvar
unit.totest=unit.totest
unit.rowest=unit.rowest
unit.colest=unit.colest
unit.grpest=unit.grpest
rowvar=rowvar
colvar=colvar
grpvar=grpvar
uniquerow=uniquerow
uniquecol=uniquecol
row.orderby=row.orderby
col.orderby=col.orderby
FIA=FIA
allin1=allin1
savedata=savedata
addtitle=addtitle
title.colvar=title.colvar
title.rowvar=title.rowvar
title.unitvar=title.unitvar
title.estcv=title.estcv
title.est=title.est
title.cv=title.cv
outfn.estcv=outfn.estcv
outfolder=outfolder
estround=estround
cvround=cvround
counts=counts
title.cndcnt=title.cndcnt
title.pltcnt=title.pltcnt


tabest = unit.cndcnt
domvar=colvar
estgrp="Freq"
